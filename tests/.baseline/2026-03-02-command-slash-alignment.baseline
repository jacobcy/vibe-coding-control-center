=== FRONTMATTER (without status) ===
---
task_id: "2026-03-02-command-slash-alignment"
document_type: task-readme
title: "Command vs Slash Alignment"
current_layer: "plan"
author: "Antigravity Agent"
created: "2026-03-02"
last_updated: "2026-03-02"
related_docs:
  - bin/vibe
  - docs/standards/command-structure.md
gates:
  scope:
    status: "pending"
    timestamp: ""
    reason: "Review the slash/shell boundaries before implementation"
  spec:
    status: "pending"
    timestamp: ""
    reason: ""
  plan:
    status: "passed"
    timestamp: "2026-03-02T10:40:00+08:00"
    reason: "The analysis and plan-v1 is completed and logged."
  test:
    status: "pending"
    timestamp: ""
    reason: ""
  code:
    status: "pending"
    timestamp: ""
    reason: ""
  audit:
    status: "pending"
    timestamp: ""
    reason: ""
---

=== BODY (without status line) ===

# Task: Command vs Slash Alignment

## 概述

随着系统向双轨生命周期发展，我们的 CLI 工具命令集（`vibe <command>`，依靠 `lib/*.sh` 实现）与 AI Workflow 交互命令集（`/vibe-<command>`，依靠 `skills/*` 和 `.agent/workflows/*` 实现）之间产生了功能重叠和底层隔离。

本任务旨在深度审查两者的边界，并制定一套**映射与代理准则**。
核心原则为：
1. **Shell 赋能 Slash (高低解耦)**: Slash 绝不应使用文本替换工具来直接操作复杂的领域数据（特别是 `.json` Registry 等结构化大盘）。底层脏活、JSON 的查询/序列化更改应该提供稳定 `vibe task update` 或类似的 Shell 接口，由 Slash (AI) 像调用 API 一样触发。 
2. **Slash 包裹 Shell (交互升维)**: 生硬而刻板的 CLI 工作流（例如提 PR，做 Code Review）应该隐藏在能够互动的 Slash 指令（`/vibe-commit`、`/vibe-pr`）背后。

## 当前收敛方向

- `/vibe-new` 是唯一的任务创建智能入口，负责“当前目录开新任务”与“新目录开新任务”的模式编排。
- `vibe task` 是 task 配置面，只保留最小 `list / add / update / remove` 子命令集合。
- `vibe flow` 是流程推进面，负责 `start / review / pr / done`，不直接承担 task 配置写入。
- 不新增独立的 `/vibe-rotate`；涉及 registry、worktree、`.vibe/*` 的状态修改都必须通过 shell 命令完成。

## 当前状态

- **层级**: Plan
- **最后更新**: 2026-03-02

## Gate 进展

| Gate | 状态 | 时间 | 备注 |
|------|------|------|------|
| Scope Gate | ⏳ Pending | - | Review the slash/shell boundaries before implementation |
| Spec Gate | ⏳ Pending | - | |
| Plan Gate | ✅ Passed | 2026-03-02T10:40:00+08:00 | The analysis and plan-v1 is completed |
| Test Gate | ⏳ Pending | - | |
| Code Gate | ⏳ Pending | - | |
| Audit Gate | ⏳ Pending | - | |

## 文档导航

### Plan（执行计划层）
- [plan-v1.md](plan-v1.md)

=== GATE TABLE ===
| Gate | 状态 | 时间 | 备注 |
|------|------|------|------|
| Scope Gate | ⏳ Pending | - | Review the slash/shell boundaries before implementation |
| Spec Gate | ⏳ Pending | - | |
| Plan Gate | ✅ Passed | 2026-03-02T10:40:00+08:00 | The analysis and plan-v1 is completed |
| Test Gate | ⏳ Pending | - | |
| Code Gate | ⏳ Pending | - | |
| Audit Gate | ⏳ Pending | - | |


=== DOC NAVIGATION ===
## 文档导航
